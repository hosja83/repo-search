{"ast":null,"code":"module.exports = addHook;\n\nfunction addHook(state, kind, name, hook) {\n  var orig = hook;\n\n  if (!state.registry[name]) {\n    state.registry[name] = [];\n  }\n\n  if (kind === \"before\") {\n    hook = function (method, options) {\n      return Promise.resolve().then(orig.bind(null, options)).then(method.bind(null, options));\n    };\n  }\n\n  if (kind === \"after\") {\n    hook = function (method, options) {\n      var result;\n      return Promise.resolve().then(method.bind(null, options)).then(function (result_) {\n        result = result_;\n        return orig(result, options);\n      }).then(function () {\n        return result;\n      });\n    };\n  }\n\n  if (kind === \"error\") {\n    hook = function (method, options) {\n      return Promise.resolve().then(method.bind(null, options)).catch(function (error) {\n        return orig(error, options);\n      });\n    };\n  }\n\n  state.registry[name].push({\n    hook: hook,\n    orig: orig\n  });\n}","map":{"version":3,"names":["module","exports","addHook","state","kind","name","hook","orig","registry","method","options","Promise","resolve","then","bind","result","result_","catch","error","push"],"sources":["/home/hosainy/documents/oden-project/repos/sas-interview-assignment/node_modules/before-after-hook/lib/add.js"],"sourcesContent":["module.exports = addHook;\n\nfunction addHook(state, kind, name, hook) {\n  var orig = hook;\n  if (!state.registry[name]) {\n    state.registry[name] = [];\n  }\n\n  if (kind === \"before\") {\n    hook = function (method, options) {\n      return Promise.resolve()\n        .then(orig.bind(null, options))\n        .then(method.bind(null, options));\n    };\n  }\n\n  if (kind === \"after\") {\n    hook = function (method, options) {\n      var result;\n      return Promise.resolve()\n        .then(method.bind(null, options))\n        .then(function (result_) {\n          result = result_;\n          return orig(result, options);\n        })\n        .then(function () {\n          return result;\n        });\n    };\n  }\n\n  if (kind === \"error\") {\n    hook = function (method, options) {\n      return Promise.resolve()\n        .then(method.bind(null, options))\n        .catch(function (error) {\n          return orig(error, options);\n        });\n    };\n  }\n\n  state.registry[name].push({\n    hook: hook,\n    orig: orig,\n  });\n}\n"],"mappings":"AAAAA,MAAM,CAACC,OAAP,GAAiBC,OAAjB;;AAEA,SAASA,OAAT,CAAiBC,KAAjB,EAAwBC,IAAxB,EAA8BC,IAA9B,EAAoCC,IAApC,EAA0C;EACxC,IAAIC,IAAI,GAAGD,IAAX;;EACA,IAAI,CAACH,KAAK,CAACK,QAAN,CAAeH,IAAf,CAAL,EAA2B;IACzBF,KAAK,CAACK,QAAN,CAAeH,IAAf,IAAuB,EAAvB;EACD;;EAED,IAAID,IAAI,KAAK,QAAb,EAAuB;IACrBE,IAAI,GAAG,UAAUG,MAAV,EAAkBC,OAAlB,EAA2B;MAChC,OAAOC,OAAO,CAACC,OAAR,GACJC,IADI,CACCN,IAAI,CAACO,IAAL,CAAU,IAAV,EAAgBJ,OAAhB,CADD,EAEJG,IAFI,CAECJ,MAAM,CAACK,IAAP,CAAY,IAAZ,EAAkBJ,OAAlB,CAFD,CAAP;IAGD,CAJD;EAKD;;EAED,IAAIN,IAAI,KAAK,OAAb,EAAsB;IACpBE,IAAI,GAAG,UAAUG,MAAV,EAAkBC,OAAlB,EAA2B;MAChC,IAAIK,MAAJ;MACA,OAAOJ,OAAO,CAACC,OAAR,GACJC,IADI,CACCJ,MAAM,CAACK,IAAP,CAAY,IAAZ,EAAkBJ,OAAlB,CADD,EAEJG,IAFI,CAEC,UAAUG,OAAV,EAAmB;QACvBD,MAAM,GAAGC,OAAT;QACA,OAAOT,IAAI,CAACQ,MAAD,EAASL,OAAT,CAAX;MACD,CALI,EAMJG,IANI,CAMC,YAAY;QAChB,OAAOE,MAAP;MACD,CARI,CAAP;IASD,CAXD;EAYD;;EAED,IAAIX,IAAI,KAAK,OAAb,EAAsB;IACpBE,IAAI,GAAG,UAAUG,MAAV,EAAkBC,OAAlB,EAA2B;MAChC,OAAOC,OAAO,CAACC,OAAR,GACJC,IADI,CACCJ,MAAM,CAACK,IAAP,CAAY,IAAZ,EAAkBJ,OAAlB,CADD,EAEJO,KAFI,CAEE,UAAUC,KAAV,EAAiB;QACtB,OAAOX,IAAI,CAACW,KAAD,EAAQR,OAAR,CAAX;MACD,CAJI,CAAP;IAKD,CAND;EAOD;;EAEDP,KAAK,CAACK,QAAN,CAAeH,IAAf,EAAqBc,IAArB,CAA0B;IACxBb,IAAI,EAAEA,IADkB;IAExBC,IAAI,EAAEA;EAFkB,CAA1B;AAID"},"metadata":{},"sourceType":"script"}