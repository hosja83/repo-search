{"ast":null,"code":"import _regeneratorRuntime from\"/home/hosainy/documents/sas/repo-search-engine/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/hosainy/documents/sas/repo-search-engine/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/hosainy/documents/sas/repo-search-engine/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/* eslint-disable react-hooks/exhaustive-deps */import React,{useState,useEffect}from\"react\";import{Link,useParams}from\"react-router-dom\";import SearchForm from\"./SearchForm.js\";import Spinner from\"./Spinner.js\";import Error from\"./Error.js\";import Pagination from\"./Pagination.js\";import\"./index.css\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var Results=function Results(){// State for repository api data, load spinner, & error message\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState({message:\"\"}),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];// Params Hook gives access to query\nvar params=useParams();// Activates Spinner and fetch repo data from API, dependent upon query\nuseEffect(function(){setIsLoading(true);fetchData();},[params.query]);// Fetches repo search results, handles errors, and aborts spinner once complete \nvar fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data,dataMsg,errorMsg;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://api.github.com/search/repositories?q=\"+params.query);case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;if(response.status>=400||response.ok===false){dataMsg=data.message;try{errorMsg=data.errors[0].message;}catch(e){errorMsg=false;}errorMsg?setError({message:errorMsg}):setError({message:dataMsg});}else{setData(data);setError({message:\"\"});}setIsLoading(false);case 8:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();/* Inner Child Component displays each search result in list\n     with a Link that Routes to it's Detailed View.\n  */function SearchResults(props){if(props.totalCount!==undefined){return/*#__PURE__*/_jsxs(\"div\",{className:\"search-results\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"results-header\",children:[\"Search found \",props.totalCount,\" results\"]}),/*#__PURE__*/_jsx(\"ul\",{className:\"results-list\",children:data.items.map(function(item){return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"result-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"repo-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"results-label results-repo\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Repository:\"}),/*#__PURE__*/_jsx(Link,{to:\"\".concat(item.id),state:{item_details:item},children:item.name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"results-label results-owner\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Owner:\"}),item.owner.login]}),/*#__PURE__*/_jsxs(\"div\",{className:\"results-label results-descr\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Description:\"}),item.description]})]}),/*#__PURE__*/_jsx(\"img\",{src:item.owner.avatar_url,alt:\"repo owner avatar\",className:\"avatar\"})]})},item.id);})}),/*#__PURE__*/_jsx(Pagination,{})]});}return null;}/* \n    Results.js component re-renders SearchForm, Error in case, Spinner while fetching data, and\n    SearchResults to display successfully fetched data from Github Search API.\n  */return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(SearchForm,{style_top:\"true\"}),error.message!==\"\"?/*#__PURE__*/_jsx(Error,{message:error.message}):null,isLoading?/*#__PURE__*/_jsx(Spinner,{}):null,isLoading?null:/*#__PURE__*/_jsx(SearchResults,{totalCount:data.total_count,query:params.query})]});};export default Results;","map":{"version":3,"names":["React","useState","useEffect","Link","useParams","SearchForm","Spinner","Error","Pagination","Results","data","setData","isLoading","setIsLoading","message","error","setError","params","fetchData","query","fetch","response","json","status","ok","dataMsg","errorMsg","errors","e","SearchResults","props","totalCount","undefined","items","map","item","id","item_details","name","owner","login","description","avatar_url","total_count"],"sources":["/home/hosainy/documents/sas/repo-search-engine/src/Results.js"],"sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useState, useEffect } from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport SearchForm from \"./SearchForm.js\";\nimport Spinner from \"./Spinner.js\";\nimport Error from \"./Error.js\";\nimport Pagination from \"./Pagination.js\";\nimport \"./index.css\";\n\nconst Results = () => {\n  // State for repository api data, load spinner, & error message\n  const [data, setData] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState({message: \"\"});\n\n  // Params Hook gives access to query\n  const params = useParams();\n\n  // Activates Spinner and fetch repo data from API, dependent upon query\n  useEffect(() => {\n    setIsLoading(true);\n    fetchData();\n  }, [params.query]);\n\n\n  // Fetches repo search results, handles errors, and aborts spinner once complete \n  const fetchData = async () => {\n    const response = await fetch(\"https://api.github.com/search/repositories?q=\" + params.query);\n    const data = await response.json();\n\n    if (response.status >= 400 || response.ok === false) {\n      const dataMsg = data.message;\n      let errorMsg;\n      try {\n        errorMsg = data.errors[0].message;\n      } catch (e) {\n        errorMsg = false;\n      }\n      (errorMsg) ? setError({message: errorMsg}) : setError({message: dataMsg});\n    } else {\n      setData(data);\n      setError({message: \"\"});\n    }\n\n    setIsLoading(false);\n  };\n\n  /* Inner Child Component displays each search result in list\n     with a Link that Routes to it's Detailed View.\n  */\n  function SearchResults(props) {\n    if (props.totalCount !== undefined) {\n      return (\n        <div className=\"search-results\">\n          <h3 className=\"results-header\">Search found {props.totalCount} results</h3>\n          <ul className=\"results-list\">\n            {\n              data.items.map( item => {\n                return (\n                  <li key={item.id}>\n                    <div className=\"result-container\">\n                      <div className=\"repo-container\">\n                        <div className=\"results-label results-repo\">\n                          <b>Repository:</b>\n                          <Link to={`${item.id}`} state={{item_details: item}}>{item.name}</Link>\n                        </div> \n                        <div className=\"results-label results-owner\">\n                          <b>Owner:</b> \n                          {item.owner.login}\n                        </div>\n                        <div className=\"results-label results-descr\">\n                          <b>Description:</b>\n                          {item.description}\n                        </div>\n                      </div>\n                      <img src={item.owner.avatar_url} alt=\"repo owner avatar\" className=\"avatar\"/>\n                    </div>\n                  </li>\n                );\n              })\n            }\n          </ul>\n          <Pagination/>\n        </div>\n      );\n    }\n    \n    return null;\n  }\n\n  /* \n    Results.js component re-renders SearchForm, Error in case, Spinner while fetching data, and\n    SearchResults to display successfully fetched data from Github Search API.\n  */\n  return (\n    <div>\n      <SearchForm style_top=\"true\" />\n      {(error.message !== \"\") ? <Error message={error.message}/> : null}\n      {(isLoading) ? <Spinner /> : null}\n      {(isLoading) ? null : <SearchResults totalCount={data.total_count} query={params.query} />}\n    </div>\n  );\n}\n\nexport default Results;"],"mappings":"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"},"metadata":{},"sourceType":"module"}